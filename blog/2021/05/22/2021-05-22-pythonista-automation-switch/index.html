<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Pythonista Automation: Smart Switch</title>
  <meta name="author" content="Luiz Lucena" />
  
  
  
  
  <meta name="keywords" content="devows, hugo, go">
  
  
  <meta name="description" content="Site template made by devcows using hugo">

  <meta name="generator" content="Hugo 0.83.1" />

  
  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.marsala.css" rel="stylesheet" id="theme-stylesheet">
  

  
  <link href="/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />

  
  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  
  <link rel="alternate" href="https://Koalacomk.github.io/index.xml" type="application/rss+xml" title="Koalacomk">

  
  
  
  
  
  
  
  <meta property="og:locale" content="en_us">
  <meta property="og:site_name" content="Koalacomk">
  <meta property="og:title" content="Pythonista Automation: Smart Switch">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://Koalacomk.github.io/blog/2021/05/22/2021-05-22-pythonista-automation-switch/" />
  <meta property="og:description" content="Site template made by devcows using hugo">
  <meta property="og:image" content="https://Koalacomk.github.io/img/banners/01PythonSmart.png">
  <meta property="og:image:type" content="image/png">
  
  
  
    <meta property="og:image:width" content="508">
    <meta property="og:image:height" content="508">
  
  
  <meta property="og:updated_time" content="2021-05-22T00:00:00Z">
  
    
    
    
    
    
    <meta property="article:published_time" content="2021-05-22T00:00:00Z">
    <meta property="article:modified_time" content="2021-05-22T00:00:00Z">
  

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@GoHugoIO">
  <meta name="twitter:title" content="Pythonista Automation: Smart Switch">
  
  <meta name="twitter:image" content="https://Koalacomk.github.io/img/banners/01PythonSmart.png">
  
  <meta name="twitter:description" content="Site template made by devcows using hugo">
  

</head>


  <body>

    <div id="all">

        <header class="navbar-affixed-top" data-spy="affix" data-offset-top="62">
    <div class="navbar navbar-default yamm" role="navigation" id="navbar">    
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/logo.png" alt="Pythonista Automation: Smart Switch logo" class="hidden-xs hidden-sm">
                    <img src="/img/logo-small.png" alt="Pythonista Automation: Smart Switch logo" class="visible-xs visible-sm">
                    <span class="sr-only">Pythonista Automation: Smart Switch - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  
                  
                  <li class="dropdown">
                    
                    <a href="/">Home</a>
                    
                  </li>
                  
                  
                  <li class="dropdown active">
                    
                    <a href="/blog/">Blog</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/faq/">About Me</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">    
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
                    </div>
                </form>
            </div>
            
        </div>
    </div>
</header>




        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Pythonista Automation: Smart Switch</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        
                          <p class="text-muted text-uppercase mb-small text-right">
                            By <a href="#">Luiz Lucena</a>
                             | 
                            May 22, 2021
                          </p>
                        

                        <div id="post-content">
                          
<script src="https://Koalacomk.github.io/blog/2021/05/22/2021-05-22-pythonista-automation-switch/index.en_files/header-attrs/header-attrs.js"></script>


<div id="pythonista-ios-automations---using-a-switch" class="section level1">
<h1>Pythonista / IOS Automations - Using a Switch</h1>
<p><br />
<br /></p>
<div class="row">
<div class="col-md-6">
<p>One of the values that we as programmers look for is the practicality in our life, whether in our personal or professional life we always look for improvements of our activities. One of the issues sought in the market that impact our personal lives is the <strong>Smart house</strong> or <strong>Home Automation</strong>, which consists of automating or monitoring our domestic tasks and environments using internet connectivity and integrated systems.
<br />
On IOS you can find systems and products integrated with Homekit and Shorcut Automations, both native to Iphone. Unfortunately Apple’s products tend to be more expensive on the market and for that reason, I tried to create alternatives to create automations with a lower price.</p>
</div>
<div class="col-md-6">
<p>Uma das coisas que nós, programadores, buscamos é a praticidade em nossa vida, seja em nossa vida pessoal ou profissional sempre buscamos o aperfeiçoamento de nossas atividades. Um dos assuntos procurados no mercado que impactam nossa vida pessoal é a <strong>Smart house</strong> ou <strong>Home Automation</strong>, que consiste em automatizar ou monitorar nossas tarefas domésticas e ambientes utilizando a conectividade com a internet e sistemas integradores.
<br />
No IOS você pode encontrar sistemas e produtos integrados com o Homekit e Automations, ambos nativos do Iphone. Infelizmente os produtos Apples tendem a ser mais caros no mercado e por isso, eu busquei criar alternativas para criar automações com um preço menor.</p>
</div>
</div>
<div id="the-switch" class="section level2">
<h2>The Switch</h2>
<p><br />
<br /></p>
<div class="figure">
<img src="img/01Switch.jpeg" alt="" />
<p class="caption">Smart Breaker</p>
</div>
<div class="row">
<div class="col-md-6">
<p>For this first attempt I used a Smart Breaker that I bought from one of these Chinese sites, where it is easily found. It can be used as a energy switch and easily installed. I did not want to change the electrical installation of my house (because I am renting) and instead I adapted a male and female socket as in the figure below, so I might reuse it when I want to change devices, but you can adapt it according to your need.</p>
</div>
<div class="col-md-6">
<p>Para este primeira tentativa eu utilizei um Smart Breaker que comprei de um destes sites chineses,onde é facilmente encontrado. Ele é pode ser utilizado como um interruptor de energia e facilmente instalado. Eu não quis mudar a instalação elétrica da minha casa (pois estou alugando) e ao inves disso adaptei uma tomada macho e fêmea como na figura abaixo, assim posso reutiliza-lo quando quiser mudar de dispositivo, mas você pode adapta-lo de acordo com sua utilização. <br /></p>
</div>
</div>
<div class="figure">
<img src="img/02Switch.jpeg" alt="" />
<p class="caption">Complete Smart Breaker</p>
</div>
</div>
<div id="connection-to-tuya-and-ios" class="section level2">
<h2>Connection to Tuya and IOS</h2>
<div class="row">
<div class="col-md-6">
<p><strong><em><a href="https://apps.apple.com/cr/app/smart-life-smart-living/id1115101477">SmartLife app</a></em></strong> connects to many devices and provides interfaces to operate each one of them. To establish the connection, just make sure that your device is on the same network as your smartphone and that the network frequency is compatible with the device (some devices only work on the 2.4 Ghz frequency).</p>
</div>
<div class="col-md-6">
O Aplicativo <strong><em><a href="https://apps.apple.com/cr/app/smart-life-smart-living/id1115101477">SmartLife</a></em></strong> se conecta a diversos dispostivos e proporciona interfaces para operar cada um deles. Para estabelecer a conexão, somente se segure que seu dispositivo esteja na mesma rede que seu smartphone e que a frequência da rede seja compativel ao aparelho (alguns dispostivos apenas funcionan na frequencia 2.4 Ghz). <br />
</div>
</div>
<p><img src="img/02TUYA.PNG" alt="Smartlife App" /> <img src="img/01TUYA.PNG" alt="Interface dor Smart Breaker" /></p>
<div class="row">
<div class="col-md-6">
<p>It is a good application but Apple doesnt recognize Tuya devices as official and therefore they do not integrate with Iphone Homekit and also does not connect with the iPhone’s Shortcuts, so we will use Pythonista to trigger and automate the device.</p>
</div>
<div class="col-md-6">
<p>Por mais que seja um bom aplicativo, a Apple não reconhece os dispositivos Tuya como oficiais e por isso eles não se integram com o Homekit do Iphone e também não se conectam com o Shortcuts App do Iphone, por isso vamos utilizar Pythonista para acionar e automatizar o dispositivo.
<br /></p>
</div>
</div>
</div>
<div id="pythonista-for-ios" class="section level2">
<h2>Pythonista for IOS</h2>
<div class="row">
<div class="col-md-6">
<p><strong><em><a href="https://apps.apple.com/us/app/pythonista-3/id1085978097">Pythonista</a></em></strong> is an app that allows you to run Python on your SMartphone. It is paid (approximately $ 9.99) but is great for running some applications. It already has some packages installed but to install other packages it is necessary to install <strong><em><a href="https://github.com/ywangd/stash">stash package</a></em></strong> that allows you to install other packages (follow the instructions on the link to install it). After installation, we will need another API to access Smart Break, <strong><em><a href="https://pypi.org/project/tinytuya/">TinyTuya package</a></em></strong>. With it we will have to access all SmartLife devices connected to the network and access some functions of it.</p>
</div>
<div class="col-md-6">
<strong><em><a href="https://apps.apple.com/us/app/pythonista-3/id1085978097">Pythonista</a></em></strong> é um app que te permite rodar Python em seu SMartphone. Ele é pago (aproximadamente U$ 9.99) mas é ótimo para rodar algumas aplicações. Ele já possui alguns pacotes instalados mas para instalar outros pacotes é necessário instalar o <strong><em><a href="https://github.com/ywangd/stash">Pacote stash</a></em></strong> que te permite instalar outros pacotes (siga as instruções no link para instala-lo). Após a instalação, vamos precisar outra API para acessar o Smart Break, <strong><a href="https://pypi.org/project/tinytuya/">Pacote TinyTuya</a></strong> . Com ele vamos ter a acessar todos os dispositivos SmartLife conectados a rede e acessar algumas funções dele.
<br />
</div>
</div>
<blockquote>
<p>import tinytuya<br /><br />
DEVICEID=‘YOUR_DEVICE_ID’<br />
DEVICEIP=‘YOUR_IP’<br />
DEVICEKEY=‘YOUR_DEVICE_KEY’<br /><br />
d=tinytuya.OutletDevice(DEVICEID, DEVICEIP, DEVICEKEY)<br />
d.set_version(3.3)<br />
data = d.status()<br />
switch_state = data[‘dps’][‘1’]<br />
if switch_state==False:<br />
printmsg=“ Acendendo Abajur …”<br />
else:<br />
printmsg = “ Apagando Abajur …”<br />
print(printmsg)<br />
data = d.set_status(not switch_state)<br /></p>
</blockquote>
</div>
</div>

                        </div>
                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "devcows" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">Search</h3>
    </div>

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" class="form-control" placeholder="Search">
                <input type="hidden" name="sitesearch" value="https://Koalacomk.github.io/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>



















                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        <footer id="footer">
    <div class="container">

        
        <div class="col-md-4 col-sm-6">
            <h4>About us</h4>

            <p> I am a simple guy trying to learn lots of stuff and helping others on their path. Also, a Mathematician, Manager, Brazilian and normal guy.</p>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        
        

        <div class="col-md-4 col-sm-6">

             
            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="https://Koalacomk.github.io/blog/2021/06/22/2021-06-22-clustering-with-r/">
                          
                            <img src="/img/banners/02Cluster.png" class="img-responsive" alt="Clustering with R">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="https://Koalacomk.github.io/blog/2021/06/22/2021-06-22-clustering-with-r/">Clustering with R</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="https://Koalacomk.github.io/blog/2021/05/22/2021-05-22-pythonista-automation-switch/">
                          
                            <img src="/img/banners/01PythonSmart.png" class="img-responsive" alt="Pythonista Automation: Smart Switch">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="https://Koalacomk.github.io/blog/2021/05/22/2021-05-22-pythonista-automation-switch/">Pythonista Automation: Smart Switch</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg">
             

        </div>
        

        
        <div class="col-md-4 col-sm-6">

          <h4>Contact</h4>

            <p class="text-uppercase"><strong>koalacomk@gmail.com</strong>
        <br>+56935290197
<br>Vina del Mar
        <br>
        <strong>Chile</strong>
      </p>
      

            <a href="/contact" class="btn btn-small btn-template-main">Go to contact page</a>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        
        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-left">Copyright (c) 2015 - 2016, YourCompany; all rights reserved.</p>
            
            <p class="pull-right">
              Template by <a href="https://bootstrapious.com/p/universal-business-e-commerce-template">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>.
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>


<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyCFhtWLJcE30xOAjcbSFi-0fnoVmQZPb1Y&v=3.exp"></script>

<script src="/js/hpneo.gmaps.js"></script>
<script src="/js/gmaps.init.js"></script>

<script src="/js/front.js"></script>


<script src="/js/owl.carousel.min.js"></script>



  </body>
</html>
